# Binary Exploitation
[https://trustfoundry.net/basic-rop-techniques-and-tricks/](https://trustfoundry.net/basic-rop-techniques-and-tricks/) 

The stack is a region of contiguous memory addresses and it is used to make it easy to transfer control and data between functions. The top of the stack is at the lowest memory address and the stack grows towards lower memory addresses. The most common operations of the stack are:

**Note:** If we were working with a 32-bit binary, we'd look for the data for our pattern search in the $RIP register.

but for 64-bit binaries, we used $rsp  
**Pushing**: used to add data onto the stack

**Popping**: used to remove data from the stack

**Note: rax is a special register that stores the return values of the functions(if any).**

Upto 6 arguments for functions can be stored in the following registers:  
 

1)rdi    2)rsi    3)rdx   4)rcx   5)r8   6)r9

`rax is caller saved`

`rdi, rsi, rdx, rcx r8 and r9 are called saved(and they are usually arguments for functions)`

`r10, r11 are caller saved`

`rbx, r12, r13, r14 are callee saved` 

`rbp is also callee saved(and can be optionally used as a frame pointer)`

`rsp is callee saved`

setreuid() can set both your real and effective uid. So we need to modify our shell code to execute setreuid(1002,1002) before it executes /bin/sh

Let’s take the value of `0x12345678` as an example.

![](Binary%20Exploitation/image.png)